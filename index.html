<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Google Maps (Leaflet)</title>

    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />

    <!-- Demo icon font (ti-*) if you use those icons in the template.
         Remove if your bundle already includes it. -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/themify-icons/1.0.1/css/themify-icons.css"
      referrerpolicy="no-referrer"
    />

    <style>
      /* ---------- Loader ---------- */
      #loader {
        transition: all 0.3s ease-in-out;
        opacity: 1;
        visibility: visible;
        position: fixed;
        height: 100vh;
        width: 100%;
        background: #fff;
        z-index: 90000;
      }
      #loader.fadeOut {
        opacity: 0;
        visibility: hidden;
      }
      .spinner {
        width: 40px;
        height: 40px;
        position: absolute;
        top: calc(50% - 20px);
        left: calc(50% - 20px);
        background-color: #333;
        border-radius: 100%;
        animation: sk-scaleout 1s infinite ease-in-out;
      }
      @keyframes sk-scaleout {
        0% {
          transform: scale(0);
        }
        100% {
          transform: scale(1);
          opacity: 0;
        }
      }

      /* ---------- Basic layout polish (works without Adminator CSS) ---------- */
      body, html {
        margin: 0;
        height: 100%;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        background: #f5f6fa;
      }
      .sidebar {
        width: 260px;
        background: #111827;
        color: #e5e7eb;
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        overflow-y: auto;
        transition: transform 0.25s ease;
        will-change: transform;
      }
      .sidebar.hidden {
        transform: translateX(-100%);
      }
      .sidebar-inner {
        padding: 16px;
      }
      .sidebar a {
        color: #e5e7eb;
        text-decoration: none;
      }
      .sidebar .sidebar-menu {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      .sidebar .sidebar-menu li {
        padding: 10px 8px;
        border-radius: 8px;
      }
      .sidebar .sidebar-menu li:hover {
        background: #1f2937;
      }

      .page-container {
        margin-left: 260px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        transition: margin-left 0.25s ease;
      }
      .page-container.expanded {
        margin-left: 0;
      }

      .header.navbar {
        background: #ffffff;
        border-bottom: 1px solid #e5e7eb;
        position: sticky;
        top: 0;
        z-index: 1000;
      }
      .header-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 16px;
      }
      .nav-left,
      .nav-right {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 0;
        padding: 0;
        list-style: none;
      }
      .search-input input {
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        padding: 8px 10px;
        width: 220px;
      }

      main.main-content {
        flex: 1;
      }
      .container-fluid {
        padding: 16px;
      }
      .bgc-white {
        background: #fff;
      }
      .bd {
        border: 1px solid #e5e7eb;
      }
      .bdrs-3 {
        border-radius: 12px;
      }
      .p-20 {
        padding: 20px;
      }
      .mB-20 {
        margin-bottom: 20px;
      }
      .mT-10 {
        margin-top: 10px;
      }
      .mB-30 {
        margin-bottom: 30px;
      }
      .c-grey-900 {
        color: #111827;
      }

      footer {
        background: #ffffff;
        border-top: 1px solid #e5e7eb;
      }

      /* ---------- Map container ----------
         We keep your aspect-ratio wrapper and fill it with an absolute map canvas. */
      #google-map {
        position: relative;
        padding-bottom: 75%; /* 4:3 aspect – adjust if you like */
        width: 100%;
      }
      #map {
        position: absolute;
        inset: 0;
      }

      /* Make it mobile friendly */
      @media (max-width: 1024px) {
        .sidebar {
          transform: translateX(-100%);
        }
        .page-container {
          margin-left: 0;
        }
      }
    </style>
  </head>
  <body class="app">
    <!-- Loader -->
    <div id="loader"><div class="spinner"></div></div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <div class="sidebar-inner">
        <div class="sidebar-logo" style="margin-bottom: 12px;">
          <a class="sidebar-link td-n" href="index.html" style="display: flex; align-items: center; gap: 10px;">
            <div class="logo" style="width: 32px; height: 32px; background:#fff;border-radius:8px;"></div>
            <h5 class="lh-1 mB-0 logo-text" style="margin:0;">Adminator</h5>
          </a>
        </div>

        <ul class="sidebar-menu scrollable pos-r">
          <li class="nav-item mT-30">
            <a class="sidebar-link" href="index.html">
              <span class="icon-holder"><i class="c-blue-500 ti-home"></i></span>
              <span class="title" style="margin-left: 8px;">Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="sidebar-link" href="email.html">
              <span class="icon-holder"><i class="c-brown-500 ti-email"></i></span>
              <span class="title" style="margin-left: 8px;">Email</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="sidebar-link" href="compose.html">
              <span class="icon-holder"><i class="c-blue-500 ti-share"></i></span>
              <span class="title" style="margin-left: 8px;">Compose</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="sidebar-link" href="calendar.html">
              <span class="icon-holder"><i class="c-deep-orange-500 ti-calendar"></i></span>
              <span class="title" style="margin-left: 8px;">Calendar</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="sidebar-link" href="chat.html">
              <span class="icon-holder"><i class="c-deep-purple-500 ti-comment-alt"></i></span>
              <span class="title" style="margin-left: 8px;">Chat</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="sidebar-link" href="charts.html">
              <span class="icon-holder"><i class="c-indigo-500 ti-bar-chart"></i></span>
              <span class="title" style="margin-left: 8px;">Charts</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="sidebar-link" href="forms.html">
              <span class="icon-holder"><i class="c-light-blue-500 ti-pencil"></i></span>
              <span class="title" style="margin-left: 8px;">Forms</span>
            </a>
          </li>
          <li class="nav-item dropdown">
            <a class="sidebar-link" href="ui.html">
              <span class="icon-holder"><i class="c-pink-500 ti-palette"></i></span>
              <span class="title" style="margin-left: 8px;">UI Elements</span>
            </a>
          </li>
          <li class="nav-item dropdown">
            <a class="dropdown-toggle" href="javascript:void(0);">
              <span class="icon-holder"><i class="c-orange-500 ti-layout-list-thumb"></i></span>
              <span class="title" style="margin-left: 8px;">Tables</span>
              <span class="arrow" style="margin-left:auto;"><i class="ti-angle-right"></i></span>
            </a>
          </li>
          <li class="nav-item dropdown">
            <a class="dropdown-toggle" href="javascript:void(0);">
              <span class="icon-holder"><i class="c-purple-500 ti-map"></i></span>
              <span class="title" style="margin-left: 8px;">Maps</span>
              <span class="arrow" style="margin-left:auto;"><i class="ti-angle-right"></i></span>
            </a>
            <ul class="dropdown-menu" style="list-style:none; padding-left:12px;">
              <li><a href="google-maps.html">Google Map</a></li>
              <li><a href="vector-maps.html">Vector Map</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="dropdown-toggle" href="javascript:void(0);">
              <span class="icon-holder"><i class="c-red-500 ti-files"></i></span>
              <span class="title" style="margin-left: 8px;">Pages</span>
              <span class="arrow" style="margin-left:auto;"><i class="ti-angle-right"></i></span>
            </a>
            <ul class="dropdown-menu" style="list-style:none; padding-left:12px;">
              <li><a class="sidebar-link" href="blank.html">Blank</a></li>
              <li><a class="sidebar-link" href="404.html">404</a></li>
              <li><a class="sidebar-link" href="500.html">500</a></li>
              <li><a class="sidebar-link" href="signin.html">Sign In</a></li>
              <li><a class="sidebar-link" href="signup.html">Sign Up</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="dropdown-toggle" href="javascript:void(0);">
              <span class="icon-holder"><i class="c-teal-500 ti-view-list-alt"></i></span>
              <span class="title" style="margin-left: 8px;">Multiple Levels</span>
              <span class="arrow" style="margin-left:auto;"><i class="ti-angle-right"></i></span>
            </a>
          </li>
        </ul>
      </div>
    </div>

    <!-- Main -->
    <div class="page-container" id="page">
      <!-- Topbar -->
      <div class="header navbar">
        <div class="header-container">
          <ul class="nav-left">
            <li>
              <a id="sidebar-toggle" class="sidebar-toggle" href="javascript:void(0);" title="Toggle sidebar">
                <i class="ti-menu"></i>
              </a>
            </li>
            <li class="search-box">
              <a class="search-toggle no-pdd-right" href="javascript:void(0);" id="search-toggle">
                <i class="search-icon ti-search"></i>
              </a>
            </li>
            <li class="search-input" id="search-input" style="display:none;">
              <input class="form-control" type="text" placeholder="Search..." />
            </li>
          </ul>
          <ul class="nav-right">
            <li class="dropdown">
              <a href="javascript:void(0);" class="dropdown-toggle no-after peers fxw-nw ai-c lh-1">
                <div class="peer mR-10">
                  <img
                    class="w-2r bdrs-50p"
                    src="https://randomuser.me/api/portraits/men/10.jpg"
                    alt=""
                    style="width:32px;height:32px;border-radius:50%;"
                  />
                </div>
                <div class="peer">
                  <span class="fsz-sm c-grey-900">John Doe</span>
                </div>
              </a>
            </li>
          </ul>
        </div>
      </div>

      <!-- Content -->
      <main class="main-content bgc-grey-100">
        <div id="mainContent">
          <div class="container-fluid">
            <h4 class="c-grey-900 mT-10 mB-30">Google Maps</h4>
            <div class="row">
              <div class="col-md-12">
                <div class="bgc-white bd bdrs-3 p-20 mB-20">
                  <h6 class="c-grey-900 mB-20">Google Maps (Leaflet)</h6>

                  <!-- Aspect-ratio wrapper -->
                  <div id="google-map">
                    <!-- Absolute map canvas -->
                    <div id="map"></div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- Footer -->
      <footer class="bdT ta-c p-30 lh-0 fsz-sm c-grey-600" style="text-align:center; padding:20px 16px;">
        <span>
          Copyright © 2025 Designed by
          <a href="https://colorlib.com" target="_blank" rel="nofollow noopener noreferrer" title="Colorlib"
            >Colorlib</a
          >. All rights reserved.
        </span>
      </footer>
    </div>

    <!-- Leaflet JS -->
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>

    <script>
      // ---------- Loader fade ----------
      window.addEventListener("load", function () {
        const loader = document.getElementById("loader");
        setTimeout(function () {
          loader.classList.add("fadeOut");
        }, 300);
      });

      // ---------- Simple UI toggles ----------
      (function uiToggles() {
        const sidebar = document.getElementById("sidebar");
        const page = document.getElementById("page");
        const btn = document.getElementById("sidebar-toggle");
        const searchToggle = document.getElementById("search-toggle");
        const searchInputWrap = document.getElementById("search-input");

        btn.addEventListener("click", () => {
          const isHidden = sidebar.classList.toggle("hidden");
          page.classList.toggle("expanded", isHidden);
        });

        searchToggle.addEventListener("click", () => {
          const shown = searchInputWrap.style.display !== "none";
          searchInputWrap.style.display = shown ? "none" : "block";
          if (!shown) {
            const input = searchInputWrap.querySelector("input");
            input && input.focus();
          }
        });
      })();

      // ---------- Leaflet Map ----------
      (function initMap() {
        // Cairo center
        const center = [30.0444, 31.2357];

        // Create map
        const map = L.map("map", {
          zoomControl: true,
          attributionControl: true,
        }).setView(center, 12);

        // Tile layer (OpenStreetMap)
        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
          maxZoom: 19,
          attribution: "&copy; OpenStreetMap contributors",
        }).addTo(map);

        // Starter marker
        const marker = L.marker(center).addTo(map);
        marker.bindPopup("<b>Cairo</b><br/>Default center.").openPopup();

        // Click-to-add markers
        map.on("click", function (e) {
          const m = L.marker(e.latlng).addTo(map);
          m.bindPopup(
            `Pinned at<br/><code>${e.latlng.lat.toFixed(6)}, ${e.latlng.lng.toFixed(6)}</code>`
          );
        });

        // Fit map on sidebar toggle (to fix map resize glitches)
        const sidebarToggle = document.getElementById("sidebar-toggle");
        sidebarToggle.addEventListener("click", () => {
          setTimeout(() => {
            map.invalidateSize();
          }, 260); // wait for CSS transition
        });

        // Also make sure map sizes correctly after loader fade
        window.addEventListener("load", () => {
          setTimeout(() => map.invalidateSize(), 400);
        });
      })();
    </script>
  </body>
</html>
